{"version":3,"sources":["fetchMovies.js","markup.js","localStorige.js","index.js"],"names":["refs","moviesListEl","document","querySelector","homePageEl","libraryPageEl","headerEl","libraryButtonsListEl","formContainerEl","searchEl","notificationEl","modalContainerEl","modalCloseBtnEl","backdropEl","watchedBtn","oueueBtn","KEY","selectedMovie","fetchTrendingMovies","response","fetch","trendingMovies","json","localStorage","setItem","JSON","stringify","fetchGenres","getItem","genres","fetchMovies","movieName","pageCounter","movies","fetchOneMovie","receiveGenres","result","undefined","receiveOneMovieGenres","receiveGenresById","genre_ids","genresId","parse","genresArray","map","genre","includes","id","push","name","length","splice","join","genreName","homeHeaderMarkup","classList","remove","add","libraryHeaderMarkup","createListMarkup","results","markup","addPoster","poster_path","original_title","release_date","slice","innerHTML","posterWay","img","createModalMarkup","oneMovie","modalMarkup","title","vote_average","vote_count","popularity","overview","addToMowies","getMovies","movie","localStorageItems","error","console","log","addToLocalstorige","findMovieInLocalStorige","btn","key","btnName","find","textContent","removeFromLocalStorige","newArray","filter","searchValue","watchedMowies","QueueMowies","getTrendingMovies","then","catch","notificationError","onSearchMovies","e","preventDefault","currentTarget","elements","searchQuery","value","trim","setTimeout","onClickMovieCard","target","nodeName","addToWatched","addToQueue","addToWatchedBtn","addEventListener","onClickAddToWatchedBtn","addToQueueBtn","onClickAddToQueueBtn","onModalClose","updateLibraryList","onBackdropClose","contains","getSavedMovies","onWatchedBtnClick","onQueueBtnClick"],"mappings":"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","file":"src.e0349bca.js","sourceRoot":"../src","sourcesContent":["export const refs = {\n  moviesListEl: document.querySelector('.movies-list'),\n  homePageEl: document.querySelector('.home-page-js'),\n  libraryPageEl: document.querySelector('.library-page-js'),\n  headerEl: document.querySelector('.header'),\n  libraryButtonsListEl: document.querySelector('.library-buttons-list'),\n  formContainerEl: document.querySelector('.form-container'),\n  searchEl: document.querySelector('.search-form'),\n  notificationEl: document.querySelector('.search-failure-text'),\n  modalContainerEl: document.querySelector('.modal_movie-container'),\n  modalCloseBtnEl: document.querySelector('.modal-close-btn'),\n  backdropEl: document.querySelector('.backdrop'),\n  watchedBtn: document.querySelector('.watched-btn-js'),\n  oueueBtn: document.querySelector('.queue-btn-js'),\n};\nconst KEY = '4a38965c8274ee66c1019c21406c4653';\nexport let selectedMovie = '';\n\nexport async function fetchTrendingMovies() {\n  const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY}`);\n  const trendingMovies = await response.json();\n  localStorage.setItem('movies', JSON.stringify(trendingMovies));\n  return trendingMovies;\n}\n\nexport async function fetchGenres() {\n  if (!localStorage.getItem('genres')) {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY}&language=en-US`,\n    );\n    const { genres } = await response.json();\n    localStorage.setItem('genres', JSON.stringify(genres));\n  } else {\n    return;\n  }\n}\n\nexport async function fetchMovies(movieName, pageCounter) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${KEY}&query=${movieName}&language=en-US&page=${pageCounter}&include_adult=false`,\n  );\n  const movies = await response.json();\n  localStorage.setItem('movies', JSON.stringify(movies));\n  return movies;\n}\n\nexport async function fetchOneMovie(movieName) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/movie/${movieName}?api_key=${KEY}&language=en-US`,\n  );\n  selectedMovie = await response.json();\n  return selectedMovie;\n}\n\n// /////////////// receive genres /////////////////////////\nexport function receiveGenres(result) {\n  if (result.genres !== undefined) {\n    return receiveOneMovieGenres(result.genres);\n  } else {\n    return receiveGenresById(result.genre_ids);\n  }\n}\nfunction receiveGenresById(genresId) {\n  const genres = JSON.parse(localStorage.getItem('genres'));\n  const genresArray = [];\n\n  genres.map(genre => {\n    if (genresId.includes(genre.id)) {\n      genresArray.push(genre.name);\n    }\n  });\n\n  if (genresArray.length > 2) {\n    genresArray.splice(2);\n    genresArray.push('Other');\n  }\n  return genresArray.join(', ');\n}\n\nfunction receiveOneMovieGenres(genres) {\n  const genreName = [];\n  genres.map(genre => {\n    genreName.push(genre.name);\n  });\n  return genreName.join(', ');\n}\n","import { refs, receiveGenres } from './fetchMovies';\nimport img from './images/no-poster-available.jpg';\n\nexport function homeHeaderMarkup() {\n  refs.libraryPageEl.classList.remove('current-page');\n  refs.homePageEl.classList.add('current-page');\n  refs.headerEl.classList.remove('header-bg-library-page');\n  refs.headerEl.classList.add('header-bg-home-page');\n  refs.libraryButtonsListEl.classList.add('header-central-container-toggle');\n  refs.formContainerEl.classList.remove('header-central-container-toggle');\n}\n\nexport function libraryHeaderMarkup() {\n  refs.homePageEl.classList.remove('current-page');\n  refs.libraryPageEl.classList.add('current-page');\n  refs.headerEl.classList.remove('header-bg-home-page');\n  refs.headerEl.classList.add('header-bg-library-page');\n  refs.formContainerEl.classList.add('header-central-container-toggle');\n  refs.libraryButtonsListEl.classList.remove('header-central-container-toggle');\n}\n\nexport function createListMarkup(results) {\n  const markup = results\n    .map(result => {\n      return `<li class=\"movie-card\" id=${result.id}>\n     <img src=${addPoster(result.poster_path)} alt=${\n        result.original_title\n      }poster\" loading=\"lazy\" class=\"image\" id=${result.id} />\n     \n       <p class=\"movie-name\" id=${result.id}>\n         ${result.original_title}\n       </p>\n       <p class=\"movie-genre\" id=${result.id}>\n       ${receiveGenres(result)} | ${result.release_date.slice(0, 4)}\n     </p>\n     \n   </li>`;\n    })\n    .join('');\n\n  refs.moviesListEl.innerHTML = markup;\n}\nfunction addPoster(posterWay) {\n  if (posterWay) {\n    return `https://image.tmdb.org/t/p/w300${posterWay}`;\n  }\n  return `${img}`;\n}\n\nexport function createModalMarkup(oneMovie) {\n  const modalMarkup = `\n  <img class=\"modal-poster\" src=${addPoster(oneMovie.poster_path)} alt=${oneMovie.original_title} />\n  <div class=\"modal-text-container\">\n  <p class=\"modal-name\">${oneMovie.title}</p>\n  <ul class=\"modal-list list\">\n    <li class=\"modal-item\">\n      <p class=\"modal-info-name\">Vote / Votes </p> \n       <p class=\"modal-value-rating\">${oneMovie.vote_average}<p/><p class=\"modal-info-value\">\n      / ${oneMovie.vote_count}</p>\n    </li>\n    <li class=\"modal-item\">\n      <p class=\"modal-info-name\">Popularity </p> <p class=\"modal-info-value\">${\n        oneMovie.popularity\n      }</p>\n    </li>\n    <li class=\"modal-item\">\n      <p class=\"modal-info-name\">Original Title </p><p class=\"modal-info-value\">${\n        oneMovie.original_title\n      }</p>\n    </li>\n    <li class=\"modal-item\">\n      <p class=\"modal-info-name\">Genre </p> <p class=\"modal-info-value\">${receiveGenres(oneMovie)}\n        </p>\n    </li>\n  </ul>\n  <p class=\"modal-about\">About</p>\n  <p class=\"modal-description\">${oneMovie.overview}</p>\n  <div class=\"modal_buttns-container\">\n          <button type=\"button\" class=\"modal-btn add-to-watched\">Add to watched</button>\n          <button type=\"button\" class=\"modal-btn add-to-queue\">Add to queue</button>\n        </div>\n  <div/>`;\n  refs.modalContainerEl.innerHTML = modalMarkup;\n}\n","import { selectedMovie } from './fetchMovies';\nlet addToMowies = [];\n\nfunction getMovies(movie) {\n  try {\n    const localStorageItems = JSON.parse(localStorage.getItem(movie));\n    if (localStorageItems) {\n      return localStorageItems;\n    } else {\n      return [];\n    }\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\nexport function addToLocalstorige(movie) {\n  addToMowies = getMovies(movie);\n  addToMowies.push(selectedMovie);\n  localStorage.setItem(movie, JSON.stringify(addToMowies));\n  return addToMowies;\n}\n\nexport function findMovieInLocalStorige(btn, key, btnName) {\n  addToMowies = getMovies(key);\n  if (addToMowies.length !== 0 && addToMowies.find(movie => selectedMovie.id === movie.id)) {\n    btn.classList.add('is-active');\n    btn.textContent = `remove from ${btnName}`;\n  } else {\n    return;\n  }\n}\n\nexport function removeFromLocalStorige(key) {\n  addToMowies = getMovies(key);\n  const newArray = addToMowies.filter(movie => movie.id !== selectedMovie.id);\n  localStorage.setItem(key, JSON.stringify(newArray));\n}\n","import './css/styles.css';\nimport { refs, fetchTrendingMovies, fetchGenres, fetchMovies, fetchOneMovie } from './fetchMovies';\nimport {\n  createListMarkup,\n  homeHeaderMarkup,\n  libraryHeaderMarkup,\n  createModalMarkup,\n} from './markup.js';\nimport { addToLocalstorige, findMovieInLocalStorige, removeFromLocalStorige } from './localStorige';\nlet pageCounter = 1;\nlet searchValue = '';\nlet watchedMowies = JSON.parse(localStorage.getItem('addToWatchedMovies'));\nlet QueueMowies = JSON.parse(localStorage.getItem('addToQueueMovies'));\n\n// ////////////////////////// start page //////////////////////////////\nfunction getTrendingMovies() {\n  homeHeaderMarkup();\n  fetchTrendingMovies()\n    .then(trendingMovies => createListMarkup(trendingMovies.results))\n    .catch(error => {\n      notificationError();\n      console.log(error);\n    });\n  fetchGenres();\n}\ngetTrendingMovies();\n\n//////////////////////// search movies ///////////////////////////////\nrefs.searchEl.addEventListener('submit', onSearchMovies);\n\nfunction onSearchMovies(e) {\n  e.preventDefault();\n\n  searchValue = e.currentTarget.elements.searchQuery.value.trim();\n\n  fetchMovies(searchValue, pageCounter)\n    .then(movies => {\n      if (movies.results.length !== 0) {\n        createListMarkup(movies.results);\n      } else {\n        notificationError();\n      }\n    })\n    .catch(error => {\n      notificationError();\n      console.log(error);\n    });\n  pageCounter += 1;\n}\n\nfunction notificationError() {\n  refs.notificationEl.textContent = 'Search result not successful. Enter the correct movie name';\n  setTimeout(() => {\n    refs.notificationEl.textContent = '';\n  }, 2000);\n}\n\n// //////////////////////// open modal window ////////////////////////\nrefs.moviesListEl.addEventListener('click', onClickMovieCard);\nfunction onClickMovieCard(e) {\n  const openModal =\n    e.target.nodeName === 'IMG' || e.target.nodeName === 'LI' || e.target.nodeName === 'P';\n\n  if (!openModal) {\n    return;\n  } else {\n    fetchOneMovie(e.target.id)\n      .then(oneMovie => {\n        createModalMarkup(oneMovie);\n        addToWatched();\n        addToQueue();\n        refs.backdropEl.classList.remove('is-hidden');\n      })\n      .catch(error => console.log(error));\n  }\n}\n\n// ///////////////////////// add to watched ////////////////////////\nfunction addToWatched() {\n  const addToWatchedBtn = document.querySelector('.add-to-watched');\n  findMovieInLocalStorige(addToWatchedBtn, 'addToWatchedMovies', `watched`);\n  addToWatchedBtn.addEventListener('click', onClickAddToWatchedBtn);\n}\nfunction onClickAddToWatchedBtn(e) {\n  if (e.target.textContent === 'Add to watched') {\n    addToLocalstorige('addToWatchedMovies');\n    watchedMowies = JSON.parse(localStorage.getItem('addToWatchedMovies'));\n    e.target.classList.add('is-active');\n    e.target.textContent = `remove from watched`;\n  } else {\n    removeFromLocalStorige('addToWatchedMovies');\n    watchedMowies = JSON.parse(localStorage.getItem('addToWatchedMovies'));\n    e.target.classList.remove('is-active');\n    e.target.textContent = `Add to watched`;\n  }\n}\n\n// /////////////////////// add to queue ///////////////////////////////\nfunction addToQueue() {\n  const addToQueueBtn = document.querySelector('.add-to-queue');\n  findMovieInLocalStorige(addToQueueBtn, 'addToQueueMovies', `queue`);\n  addToQueueBtn.addEventListener('click', onClickAddToQueueBtn);\n}\nfunction onClickAddToQueueBtn(e) {\n  if (e.target.textContent === 'Add to queue') {\n    addToLocalstorige('addToQueueMovies');\n    QueueMowies = JSON.parse(localStorage.getItem('addToQueueMovies'));\n    e.target.classList.add('is-active');\n    e.target.textContent = `remove from queue`;\n  } else {\n    removeFromLocalStorige('addToQueueMovies');\n    QueueMowies = JSON.parse(localStorage.getItem('addToQueueMovies'));\n    e.target.classList.remove('is-active');\n    e.target.textContent = `Add to queue`;\n  }\n}\n\n// ////////////////////////// close modal window /////////////////////\nrefs.modalCloseBtnEl.addEventListener('click', onModalClose);\nfunction onModalClose() {\n  updateLibraryList();\n  refs.backdropEl.classList.add('is-hidden');\n  refs.modalContainerEl.innerHTML = '';\n}\nrefs.backdropEl.addEventListener('click', onBackdropClose);\nfunction onBackdropClose(e) {\n  if (e.currentTarget === e.target) {\n    onModalClose();\n    updateLibraryList();\n  }\n}\n\nfunction updateLibraryList() {\n  if (refs.libraryButtonsListEl.classList.contains('header-central-container-toggle')) {\n    return;\n  } else if (refs.oueueBtn.classList.contains('is-active')) {\n    createListMarkup(QueueMowies);\n  } else {\n    console.log(watchedMowies);\n    createListMarkup(watchedMowies);\n  }\n}\n\n// //////////////////////// home page ////////////////////\nrefs.homePageEl.addEventListener('click', getTrendingMovies);\n\n//////////////////////// library page /////////////////////\nrefs.libraryPageEl.addEventListener('click', getSavedMovies);\nfunction getSavedMovies() {\n  libraryHeaderMarkup();\n  onWatchedBtnClick();\n}\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nfunction onWatchedBtnClick() {\n  createListMarkup(watchedMowies);\n  refs.oueueBtn.classList.remove('is-active');\n  refs.watchedBtn.classList.add('is-active');\n}\n\nrefs.oueueBtn.addEventListener('click', onQueueBtnClick);\nfunction onQueueBtnClick() {\n  createListMarkup(QueueMowies);\n  refs.watchedBtn.classList.remove('is-active');\n  refs.oueueBtn.classList.add('is-active');\n}\n"]}