{"version":3,"sources":["fetchMovies.js","markup.js","index.js"],"names":["refs","moviesListEl","document","querySelector","homePageEl","libraryPageEl","headerEl","libraryButtonsListEl","searchEl","notificationEl","modalEl","modalContainerEl","modalCloseBtnEl","KEY","selectedMovie","fetchTrendingMovies","response","fetch","trendingMovies","json","localStorage","setItem","JSON","stringify","fetchGenres","getItem","genres","receiveGenres","genresId","parse","genresArray","map","genre","includes","id","push","name","length","splice","join","receiveOneMovieGenres","genreName","fetchMovies","movieName","pageCounter","movies","fetchOneMovie","homeHeaderMarkup","classList","remove","add","libraryHeaderMarkup","createMarkup","markup","results","result","addPoster","poster_path","original_title","genre_ids","release_date","slice","innerHTML","posterWay","img","createModalMarkup","oneMovie","modalMarkup","title","vote_average","vote_count","popularity","overview","insertAdjacentHTML","searchValue","getTrendingMovies","then","catch","error","notificationError","console","log","onSearchMovies","e","preventDefault","currentTarget","elements","searchQuery","value","trim","textContent","setTimeout","getSavedMovies","onClickMovieCard","target","nodeName","onModalClose","addEventListener"],"mappings":"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","file":"src.60d278b3.js","sourceRoot":"../src","sourcesContent":["export const refs = {\n  moviesListEl: document.querySelector('.movies-list'),\n  homePageEl: document.querySelector('.home-page-js'),\n  libraryPageEl: document.querySelector('.library-page-js'),\n  headerEl: document.querySelector('.header'),\n  libraryButtonsListEl: document.querySelector('.library-buttons-list'),\n  searchEl: document.querySelector('.search-form'),\n  notificationEl: document.querySelector('.search-failure-text'),\n  modalEl: document.querySelector('.backdrop'),\n  modalContainerEl: document.querySelector('.modal_movie-container'),\n  modalCloseBtnEl: document.querySelector('.modal-close-btn'),\n};\nconst KEY = '4a38965c8274ee66c1019c21406c4653';\nexport let selectedMovie = '';\n\nexport async function fetchTrendingMovies() {\n  const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY}`);\n  const trendingMovies = await response.json();\n  localStorage.setItem('movies', JSON.stringify(trendingMovies));\n  return trendingMovies;\n}\n\nexport async function fetchGenres() {\n  if (!localStorage.getItem('genres')) {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY}&language=en-US`,\n    );\n    const { genres } = await response.json();\n    localStorage.setItem('genres', JSON.stringify(genres));\n  } else {\n    return;\n  }\n}\nexport function receiveGenres(genresId) {\n  const genres = JSON.parse(localStorage.getItem('genres'));\n  const genresArray = [];\n  genres.map(genre => {\n    if (genresId.includes(genre.id)) {\n      genresArray.push(genre.name);\n    }\n  });\n\n  if (genresArray.length > 2) {\n    genresArray.splice(2);\n    genresArray.push('Other');\n  }\n\n  return genresArray.join(', ');\n}\n\nexport function receiveOneMovieGenres(genres) {\n  const genreName = [];\n  genres.map(genre => {\n    genreName.push(genre.name);\n  });\n  return genreName.join(', ');\n}\n\nexport async function fetchMovies(movieName, pageCounter) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${KEY}&query=${movieName}&language=en-US&page=${pageCounter}&include_adult=false`,\n  );\n  const movies = await response.json();\n  localStorage.setItem('movies', JSON.stringify(movies));\n  return movies;\n}\n\nexport async function fetchOneMovie(movieName) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/movie/${movieName}?api_key=${KEY}&language=en-US`,\n  );\n  selectedMovie = await response.json();\n  // localStorage.setItem('selectedMovie', JSON.stringify(selectedMovie));\n  return selectedMovie;\n}\n","import { refs, receiveGenres, receiveOneMovieGenres } from './fetchMovies';\nimport img from './images/no-poster-available.jpg';\n\nexport function homeHeaderMarkup() {\n  refs.libraryPageEl.classList.remove('current-page');\n  refs.homePageEl.classList.add('current-page');\n  refs.headerEl.classList.remove('header-bg-library-page');\n  refs.headerEl.classList.add('header-bg-home-page');\n  refs.libraryButtonsListEl.classList.add('header-central-container-toggle');\n  refs.searchEl.classList.remove('header-central-container-toggle');\n}\n\nexport function libraryHeaderMarkup() {\n  refs.homePageEl.classList.remove('current-page');\n  refs.libraryPageEl.classList.add('current-page');\n  refs.headerEl.classList.remove('header-bg-home-page');\n  refs.headerEl.classList.add('header-bg-library-page');\n  refs.searchEl.classList.add('header-central-container-toggle');\n  refs.libraryButtonsListEl.classList.remove('header-central-container-toggle');\n}\nexport function createMarkup(movies) {\n  const markup = movies.results\n    .map(result => {\n      return `<li class=\"movie-card\" id=${result.id}>\n     <img src=${addPoster(result.poster_path)} alt=${\n        result.original_title\n      }poster\" loading=\"lazy\" class=\"image\" id=${result.id} />\n     \n       <p class=\"movie-name\" id=${result.id}>\n         ${result.original_title}\n       </p>\n       <p class=\"movie-genre\" id=${result.id}>\n       ${receiveGenres(result.genre_ids)} | ${result.release_date.slice(0, 4)}\n     </p>\n     \n   </li>`;\n    })\n    .join('');\n\n  refs.moviesListEl.innerHTML = markup;\n}\nfunction addPoster(posterWay) {\n  if (posterWay) {\n    return `https://image.tmdb.org/t/p/w300${posterWay}`;\n  }\n  return `${img}`;\n}\n\nexport function createModalMarkup(oneMovie) {\n  const modalMarkup = `\n  <img class=\"movie_modal-poster\" src=${addPoster(oneMovie.poster_path)} alt=${\n    oneMovie.original_title\n  } />\n  <div class=\"movie_modal-text-container\">\n  <p class=\"movie_modal-name\">${oneMovie.title}</p>\n  <ul class=\"movie_modal-list list\">\n    <li class=\"movie_modal-item\">\n      <p class=\"movie_modal-subtitle\">Vote / Votes </p> \n       <p class=\"movie_modal-value-rating\">${oneMovie.vote_average}<p/><p class=\"movie_modal-value\">\n      / ${oneMovie.vote_count}</p>\n    </li>\n    <li class=\"movie_modal-item\">\n      <p class=\"movie_modal-subtitle\">Popularity </p> <p class=\"movie_modal-value\">${\n        oneMovie.popularity\n      }</p>\n    </li>\n    <li class=\"movie_modal-item\">\n      <p class=\"movie_modal-subtitle\">Original Title </p><p class=\"movie_modal-value\">${\n        oneMovie.original_title\n      }</p>\n    </li>\n    <li class=\"movie_modal-item\">\n      <p class=\"movie_modal-subtitle\">Genre </p> <p class=\"movie_modal-value\">${receiveOneMovieGenres(\n        oneMovie.genres,\n      )}</p>\n    </li>\n  </ul>\n  <p class=\"movie_modal-desc-title\">About</p>\n  <p class=\"movie_modal-description\">${oneMovie.overview}</p>\n  <div/>`;\n  refs.modalContainerEl.insertAdjacentHTML('afterbegin', modalMarkup);\n}\n","import './css/styles.css';\nimport {\n  refs,\n  fetchTrendingMovies,\n  fetchGenres,\n  fetchMovies,\n  fetchOneMovie,\n  selectedMovie,\n} from './fetchMovies';\nimport {\n  createMarkup,\n  homeHeaderMarkup,\n  libraryHeaderMarkup,\n  createModalMarkup,\n} from './markup.js';\nlet pageCounter = 1;\nlet searchValue = '';\n\nfunction getTrendingMovies() {\n  homeHeaderMarkup();\n  fetchTrendingMovies()\n    .then(trendingMovies => createMarkup(trendingMovies))\n    .catch(error => {\n      notificationError();\n      console.log(error);\n    });\n  fetchGenres();\n}\n\ngetTrendingMovies();\n\nrefs.homePageEl.addEventListener('click', getTrendingMovies);\n\nrefs.searchEl.addEventListener('submit', onSearchMovies);\n\nfunction onSearchMovies(e) {\n  e.preventDefault();\n\n  searchValue = e.currentTarget.elements.searchQuery.value.trim();\n\n  fetchMovies(searchValue, pageCounter)\n    .then(movies => {\n      if (movies.results.length !== 0) {\n        createMarkup(movies);\n      } else {\n        notificationError();\n      }\n    })\n    .catch(error => {\n      notificationError();\n      console.log(error);\n    });\n  pageCounter += 1;\n}\n\nfunction notificationError() {\n  refs.notificationEl.textContent = 'Search result not successful. Enter the correct movie name';\n  setTimeout(() => {\n    refs.notificationEl.textContent = '';\n  }, 2000);\n}\n\nrefs.libraryPageEl.addEventListener('click', getSavedMovies);\nfunction getSavedMovies() {\n  libraryHeaderMarkup();\n}\n\nrefs.moviesListEl.addEventListener('click', onClickMovieCard);\nfunction onClickMovieCard(e) {\n  const openModal =\n    e.target.nodeName === 'IMG' || e.target.nodeName === 'LI' || e.target.nodeName === 'P';\n\n  if (!openModal) {\n    return;\n  } else {\n    refs.modalEl.classList.remove('is-hidden');\n    fetchOneMovie(e.target.id)\n      .then(oneMovie => {\n        createModalMarkup(oneMovie);\n      })\n      .catch(error => console.log(error));\n  }\n}\n\nrefs.modalCloseBtnEl.addEventListener('click', onModalClose);\nfunction onModalClose() {\n  refs.modalEl.classList.add('is-hidden');\n  refs.modalContainerEl.innerHTML = '';\n}\n"]}